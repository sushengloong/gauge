<% if @goal.errors.any? %>

  var msg = '<div class="alert alert-error alert-block">'
    + '<button type="button" class="close" data-dismiss="alert">Ã—</button>'
    + "<h4><%= pluralize(@goal.errors.count, "error") %> prohibited this goal from being saved:</h4>"
    + "<ul>"
    <% @goal.errors.full_messages.each do |msg| %>
      + "<li><%= msg %></li>"
    <% end %>
    + "</ul>"
    + "</div>";
  $('div#message-wrapper').html(msg);

<% else %>

  $('div#goal-ctn').modal('hide');

  var tbody = $('table#goals-table tbody');
  tbody.find('tr#goal_<%= @goal.id %>').replaceWith("<%= escape_javascript render(@goal) %>");

<% end %>
